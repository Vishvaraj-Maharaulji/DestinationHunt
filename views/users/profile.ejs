<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0"
		/>
		<title>Destination Hunt</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
			crossorigin="anonymous"
		/>
		<link rel="stylesheet" href="/stylesheets/profile.css" />
	</head>

	<body class="d-flex flex-column" style="min-height: 100vh">
		<%- include("../partials/navbar") %>
		<main class="container my-5">
			<%- include("../partials/flash") %>
			<div class="row">
				<div class="col-md-6 offset-md-3">
					<div class="card mb-3">
						<div class="card-body">
							<div
								class="bg-primary rounded-circle mb-3 mx-auto"
								style="width: 100px; height: 100px"
							>
								<div
									class="text-white fs-3 text-center"
									style="width: 100px; line-height: 100px"
								>
									<%=user.username.substring(0,2).toUpperCase() %>
								</div>
							</div>
							<h3 class="card-title text-center text-light mb-3">
								Username : <%= user.username %>
							</h3>
							<h4 class="card-subtitle text-center text-light mb-3">
								Email : <%= user.email %>
							</h4>
							<h5 class="card-text text-center text-light mb-3">
								User Joined : <%= user.createdAt.getDate() %>-<%=
								user.createdAt.getMonth() + 1 %>-<%=
								user.createdAt.getFullYear() %>
							</h5>
							<div class="row">
								<% if(venues.length){ %>
								<div class="col text-center">
									<a
										id="blog-a"
										data-bs-toggle="collapse"
										href="#collapseVenue"
										aria-expanded="false"
										aria-controls="collapseVenue"
									>
										Venues By <%= user.username %>
									</a>
								</div>
								<% } %>
								<div class="col text-center">
									<a class="text-decoration-none" href="/venues"
										>All Venues</a
									>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-6 offset-md-3">
					<div class="card mb-3 collapse" id="collapseVenue">
						<div class="card-body">
							<h4 class="card-title text-center text-light mb-3">
								<%= venues.length %> Venues Posted By <%= user.username %>
							</h4>
							<% for(let venue of venues) { %>
							<div class="row">
								<div class="col">
									<div class="card mb-3">
										<div class="card-body text-center">
											<h5 class="card-title text-light">
												<%= venue.title %>
											</h5>
											<a
												href="/venues/<%= venue._id %>"
												class="btn btn-link text-decoration-none"
												>View Venue</a
											>
										</div>
									</div>
								</div>
							</div>
							<% } %>
						</div>
					</div>
				</div>
			</div>
		</main>
		<%- include("../partials/footer") %>

		<script
			src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
			integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
			crossorigin="anonymous"
		></script>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
			integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
			crossorigin="anonymous"
		></script>
	</body>
</html>
